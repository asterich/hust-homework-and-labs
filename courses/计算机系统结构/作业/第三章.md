###### 3.8

$$
吞吐量\text{TP} &=&& \frac{7}{18 \Delta t} &&&=&&&& \frac{0.39}{\Delta t} \\
加速比\text{S} &=&& \frac{28\Delta t}{18\Delta t} &&&=&&&& 1.56 \\
效率\text{E} &=&& \frac{28}{18 \times 5} &&&=&&&& 0.31
$$

###### 3.10

1. 禁止表$\text{F} = \{1,3,6\}$ 初始冲突向量$\text{C}_0 = (100101)$

   状态转移图如下：

   ![e673f4eefa37cbe42ea4e1fa85c4ec52](D:\Documents\320873791\nt_qq\nt_data\Pic\2024-04\Ori\e673f4eefa37cbe42ea4e1fa85c4ec52.jpeg)

2. |            | 允许不等时间间隔 | 等时间间隔 |
   | ---------- | ---------------- | ---------- |
   | 调度策略   | (2,2,5)          | (4)        |
   | 最大吞吐率 | 1/(3Δt)          | 1/(4Δt)    |

3. |            | 允许不等时间间隔 | 等时间间隔 |
   | ---------- | ---------------- | ---------- |
   | 实际吞吐率 | 10/(34Δt)        | 10/(43Δt)  |
   | 加速比     | 70/34=2.06       | 70/43=1.63 |

   



###### 3.11

1. |                   | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    | 10   | 11   | 12   | 13   | 14   | 15   | 16   | 17   | 18   | 19   |
   | ----------------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | LOOP: LW R1 0(R2) | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |      |      |      |      |      |      |      |      |      |
   | ADDI R1 R1 #1     |      | IF   | S    | S    | ID   | EX   | MEM  | WB   |      |      |      |      |      |      |      |      |      |      |      |
   | SW 0(R2) R1       |      |      |      |      | IF   | S    | S    | ID   | EX   | MEM  | WB   |      |      |      |      |      |      |      |      |
   | ADDI R2 R2 #4     |      |      |      |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |      |      |
   | SUB R4 R3 R2      |      |      |      |      |      |      |      |      | IF   | S    | S    | ID   | EX   | MEM  | WB   |      |      |      |      |
   | BNZ R4 LOOP       |      |      |      |      |      |      |      |      |      |      |      | IF   | S    | S    | ID   | EX   | MEM  | WB   |      |
   | HALT              |      |      |      |      |      |      |      |      |      |      |      |      |      |      | IF   |      |      |      |      |
   | LW R1 0(R2)       |      |      |      |      |      |      |      |      |      |      |      |      |      |      |      | IF   | ID   | EX   |      |

   需要进行396/4=99次循环，每次分支都清空流水线，每次循环都要15个时钟周期，总共需要99x15+3=1488

2. |                   | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    | 10   | 11   | 12   |
   | ----------------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | LOOP: LW R1 0(R2) | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |      |      |
   | ADDI R1 R1 #1     |      | IF   | ID   | S    | EX   | MEM  | WB   |      |      |      |      |      |
   | SW 0(R2) R1       |      |      | IF   | S    | ID   | EX   | MEM  | WB   |      |      |      |      |
   | ADDI R2 R2 #4     |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |
   | SUB R4 R3 R2      |      |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |
   | BNZ R4 LOOP       |      |      |      |      |      |      | IF   | S    | ID   | EX   | MEM  | WB   |
   | HALT              |      |      |      |      |      |      |      |      | IF   |      |      |      |
   | LW R1 0(R2)       |      |      |      |      |      |      |      |      |      | IF   |      |      |

   需要进行396/4=99次循环，每次分支都清空流水线，每次循环都要9个时钟周期，总共需要99x9+3=894时钟周期

3. |                   | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    | 10   | 11   |
   | ----------------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | LOOP: LW R1 0(R2) | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |      |
   | ADDI R1 R1 #1     |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |      |
   | ADDI R2 R2 #4     |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |      |
   | SUB R4 R3 R2      |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |      |
   | BNZ R4 LOOP       |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |      |
   | SW 0(R2) R1       |      |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |      |
   | LW R1 0(R2)       |      |      |      |      |      |      | IF   | ID   | EX   | MEM  | WB   |

   每轮6拍，末轮还需4拍

   总时钟周期数：(99×6) + 4 = 598